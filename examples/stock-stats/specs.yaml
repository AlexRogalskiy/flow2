collections:
  - name: ticks
    schema: schemas/L1-tick.yaml
    key: [/id]
    fixtures: [fixtures/L1-tick.yaml]

    projections:
      - field: exchange
        location: /exchange
        partition: true
      - field: bar
        location: /bar

  - name: daily-stats
    schema: schemas/daily-stat.yaml
    key: [/security, /date]
    fixtures: [fixtures/daily-stats.yaml]

    projections:
      - field: exchange
        location: /exchange
        partition: true
      - field: my_special_column
        location: /bid/high

    derivation:
      bootstrap:
        - nodeJS: () => { console.log("example of a bootstrap!"); }
      transform:
        - source: ticks
          lambda:
            nodeJSFile: lambdas/map-tick-to-daily-stats.ts

#materializations:
#  - collection: daily-stats
#
#    target:
#      type: postgres
#      endpoint: postgres://127.0.0.1:5432/my-db
#      table: daily_stats
